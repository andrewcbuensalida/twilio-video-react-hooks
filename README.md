development workflow
In react-native folder, in server,
    nodemon
In this folder,
    npm start

deployment workflow
When trying to npm run build on ubuntu, it freezes (maybe need more ram?), so build locally, make sure build folder is not in .gitignore, push then pull. ACTUALLY, after running 
    npx browserslist@latest --update-db
npm run build didn't freeze ubuntu anymore.


/////////////////////////////////////////
Setting up oracle sql database
download and install oracle database
download and install oracle sql developer
In oracle sql developer, connect to database
    new connection
    username = SYS
    Role = SYSDBA
    password = <password>
Click test, it should show successful on bottom left. If it doesn't have to reinstall oracle database

////////////////////////////////////////////////////////////////
//This might not be the proper way. Fast forward to next way to create a user.
Create a new user by going to the bottom of connection, right click Other Users, Create User
User Name has to start with C## and has to be all caps
OR
    CREATE USER C##ANDREWCBUENSALIDA
        IDENTIFIED BY <password>
Create a table with 
    CREATE TABLE C##ANDREWCBUENSALIDA.rooms(
        id NUMBER GENERATED BY DEFAULT AS IDENTITY,
        name VARCHAR2(50) NOT NULL,
        PRIMARY KEY(id)
    );

///////////////////////////////////////////////////////////////////////////
To insert a record, not the proper way either
    INSERT INTO C##ANDREWCBUENSALIDA.ROOMS VALUES ("C##ANDREWCBUENSALIDA"."ISEQ$$_76608".nextval, 'room1')
    INSERT INTO C##ANDREWCBUENSALIDA.ROOMS VALUES ("C##ANDREWCBUENSALIDA"."ISEQ$$_76608".nextval, 'room2')

///////////////////////////////////////////////////////////////////////
They say the proper way is to create a PDB (pluggable database), then create a regular user inside there, not create a common user from CDB (container database, the default database that SYS logs into). If I do this, I don't need to prefix the user name with C## anymore(for common user in CDB) https://community.oracle.com/tech/developers/discussion/4288833/ora-65096-invalid-common-user-or-role-name
CDB can contain many PDBs. Each PDB is isolated from one another. 

To create a PDB, show pdbs
    SHOW PDBS;
    OR
    SELECT name, open_mode FROM v$pdbs;

Then create a pdb
    CREATE PLUGGABLE DATABASE MerryPDB
    ADMIN USER andrewcbuensalida IDENTIFIED BY <password>
    file_name_convert = ('\pdbseed\', '\MerryPDB\');

There's other parameters like default tablespace, storage size, create_file_dest

Have to change created pdb from mounted to read write with https://stackoverflow.com/questions/69907074/problem-intalling-oracle-21c-he-network-adapter-could-not-establish-the-connecti
    alter pluggable database MerryPDB open;
    alter pluggable database all save state;

Create new connection for the PDB
    username still SYS
    role is still SYSDBA
    service name is MerryPDB
OR https://www.youtube.com/watch?v=DYleroLay5E
To connect to oracle via command prompt
    sqlplus / as sysdba
to connect to pdb
    CONNECT SYS/<password>@localhost:1521/MerryPDB as SYSDBA;

Scroll down to other users, edit ANDREWCBUENSALIDA, grant all roles and all system privileges except sysrac. 

Create a new database connection
    username = andrewcbuensalida
    role = default
    password =<password>
    hostname = localhost
    service name = MerryPDB

connect
////////////////////////////////////////////////
Create a table with 
    CREATE TABLE rooms(
        id NUMBER GENERATED BY DEFAULT AS IDENTITY,
        name VARCHAR2(50) NOT NULL,
        PRIMARY KEY(id)
    );

Note that oracle seems to make rooms uppercase

//////////////////////////////////////////////////////
    INSERT INTO ROOMS VALUES ("ANDREWCBUENSALIDA"."ISEQ$$_75709".nextval, 'room1');
    INSERT INTO ROOMS VALUES ("ANDREWCBUENSALIDA"."ISEQ$$_75709".nextval, 'room2');

Don't need the ANDREWCBUENSALIDA in front of the .ROOMS if connected as andrewcbuensalida, but do need it if connected as SYS.
the 75709 is from looking at the table columns. It will be different each time you create the table?
////////////////////////////////////////////
To drop PDB, from the CDB
    ALTER PLUGGABLE DATABASE MerryPDB CLOSE IMMEDIATE;
then
    DROP PLUGGABLE DATABASE MerryPDB
        INCLUDING DATAFILES;


//////////////////////////////////////
To list all tables
    SELECT
        *
    FROM
        all_tables
    WHERE 
        OWNER='ANDREWCBUENSALIDA'

/////////////////////////////////////
setting up nginx, same as in express server
    sudo nano /etc/nginx/sites-available/merry.anhonestobserver.com.conf

Then type

    upstream loadbalancer {
        least_conn;
        server localhost:5000;
        server localhost:5001;
    }
    server {
        listen 80;
        root /home/ubuntu/merry/react/build;

        index index.html index.htm index.nginx-debian.html;
        server_name merry.anhonestobserver.com www.merry.anhonestobserver.com;

        location / {
                try_files $uri /index.html;
        }

        location /api {
                proxy_pass http://loadbalancer;
                proxy_buffering on;
        }

    }

Sim link
    sudo ln -s /etc/nginx/sites-available/merry.anhonestobserver.com.conf /etc/nginx/sites-enabled/

Then reload nginx
    sudo systemctl reload nginx 

To make sure it's working
    sudo nginx -t

enable https via certbot ssl
    sudo certbot --nginx

///////////////////////////////////
